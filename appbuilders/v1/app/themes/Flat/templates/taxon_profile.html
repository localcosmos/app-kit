<div class="page solid">
	<div class="container">
		<div class="row">
			<div class="col-12 mt-3">
				<div class="text-center text-md-left">
					{{#if vernacular}}
						<h2>{{ vernacular }}</h2>
						<i>{{ taxon_profile.taxon_latname }}</i>
					{{else}}
						{{#if taxon_profile.node_names}}
							<h2>{{tp taxon_profile.node_names.[0] }}</h2>
							<i>{{ taxon_profile.taxon_latname }}</i>
						{{else}}
							<h2><i>{{ taxon_profile.taxon_latname }}</i></h2>
						{{/if}}
					{{/if}}
				</div>
			</div>
		</div>

		<div id="taxon-profile-images" class="row mt-3">
			

			{{#if taxon_profile.images.taxon_profile_images}}
				{{#each taxon_profile.images.taxon_profile_images}}
					{{#if small_url}}
						<div class="col-4 col-md-3 col-lg-2">
							<div class="tap" data-hd-url="{{large_url}}" data-image-url="{{image_url}}" action="ImageViewer.toggle" data-imageviewer-mode="watch" data-thumb-container-id="taxon-profile-images">
								<img src="{{small_url}}" class="img-fluid" />
							</div>
							{{#if text}}
								<div class="image-text">
									<small>{{t text }}</small>
								</div>
							{{/if}}
						</div>
					{{/if}}
				{{/each}}
			{{/if}}
			{{#if taxon_profile.images.node_images}}
				{{#each taxon_profile.images.node_images}}
					{{#if small_url}}
						<div class="col-4 col-md-3 col-lg-2 tap" data-hd-url="{{large_url}}" data-image-url="{{image_url}}" action="ImageViewer.toggle" data-imageviewer-mode="watch" data-thumb-container-id="taxon-profile-images">
							<img src="{{small_url}}" class="img-fluid" />
						</div>
					{{/if}}
				{{/each}}
			{{/if}}
			{{#if taxon_profile.images.taxon_images}}
				{{#each taxon_profile.images.taxon_images}}
					{{#if small_url}}
						<div class="col-4 col-md-3 col-lg-2 tap" data-hd-url="{{large_url}}" data-image-url="{{image_url}}" action="ImageViewer.toggle" data-imageviewer-mode="watch" data-thumb-container-id="taxon-profile-images">
							<img src="{{small_url}}" class="img-fluid" />
						</div>
					{{/if}}
				{{/each}}
			{{/if}}

		</div>

		<div class="row my-5">
			<div class="col-12">

				<div class="row action-buttons justify-content-center justify-content-md-start text-center text-md-left">
					{{#if options.enable_observation_button}}
						<div class="col-auto text-center">
							<a link="{{url 'new_observation' options.enable_observation_button.uuid }}" kwargs='{"taxon_source":"{{taxon_profile.taxon_source}}","name_uuid":"{{taxon_profile.name_uuid}}","taxon_latname":"{{taxon_profile.taxon_latname}}","taxon_author":"{{taxon_profile.taxon_author}}","taxon_nuid":"{{taxon_profile.taxon_nuid}}"}' class="tap"><img src="{{themeFolder}}img/observation.svg" /></a><br>
							<small class="text-secondary">{{tp 'Observation'}}</small>
						</div>
					{{/if}}
					{{#if options.enable_wikipedia_button}}
						<div class="col-auto text-center">
							<a href="{{ wikipedia_url }}" target="_blank"><img src="{{themeFolder}}img/wikipedia_button.svg" /></a><br>
							<small class="text-secondary">Wikipedia</small>
						</div>
					{{/if}}
					{{#if options.enable_gbif_occurrence_map_button }}
						<div class="col-auto text-center">
							{{#if taxon_profile.gbif_nubKey}}
								<a link="{{url 'occurrence_map' taxon_profile.gbif_nubKey }}" class="tap"><img src="{{themeFolder}}img/occurrence.svg" /></a><br>
								<small class="text-secondary">{{tp 'Occurrence'}}</small>
							{{else}}
								<br>
								<div>{{t 'No occurrence map available'}}</div>
							{{/if}}
						</div>
					{{/if}}
				</div>
			</div>
		</div>
	</div>

	{{#if taxon_profile.traits}}
		<div class="container-fluid translucent dark py-3">
			<div class="container">
				<div class="row mt-3">
					<div class="col-12 mb-4">
						<h4>{{tp 'Traits'}}</h4>
					</div>
					<div class="col-12">
						<div class="row">
							{{#each taxon_profile.traits}}
								{{#if values}}
									<div class="col-6 col-md-4 mb-5 taxon-profile-traits-container">
										<h5>{{t matrix_filter.name}}</h5>
										
										{{#ifequal matrix_filter.filter_type 'ColorFilter'}}
											<div class="row">
												{{#each values}}
													<div class="col-12 col-md-6">
														<div class="trait-property">
															<label class="text-center">
																<div class="square responsiveback" {{#if gradient}}style="background-image:{{html}};"{{else}}style="background-color:{{html}};"{{/if}}></div>
																{{#if description}}
																	<div class="trait-property-text">
																		{{ description }}
																	</div>
																{{/if}}
															</label>
														</div>
													</div>
												{{/each}}
											</div>
										{{/ifequal}}
										{{#ifequal matrix_filter.filter_type 'DescriptiveTextAndImagesFilter'}}
											<div class="row">
												{{#each values}}
													<div class="col-12 col-md-6">
														<div class="trait-property">
															<label class="text-center">
																<div class="square responsiveback" style="background-image:url('{{image_url}}')"></div>
																<div class="trait-property-text">{{tp encoded_space}}</div>
															</label>
														</div>
													</div>
												{{/each}}
											</div>
										{{/ifequal}}
										{{#ifequal matrix_filter.filter_type 'TextOnlyFilter'}}
											<div class="row">
												{{#each values}}
													<div class="col-12">
														<div class="trait-property text-only">
															<div>
																<div class="trait-property-text">{{t encoded_space}}</div>
															</div>
														</div>
													</div>
												{{/each}}
											</div>
										{{/ifequal}}
										{{#ifequal matrix_filter.filter_type 'RangeFilter'}}
											<div class="row">
												<div class="col-12">
													<div class="range-display">
														<div class="range-display-min">
															{{ values.[0] }}
															{{#if matrix_filter.definition.unit }}
																{{ matrix_filter.definition.unit }}
															{{/if}}
														</div>
														<div class="range-display-bar">

														</div>
														<div class="range-display-max">
															{{ values.[1] }}
															{{#if matrix_filter.definition.unit }}
																{{ matrix_filter.definition.unit }}
															{{/if}}
														</div>
													</div>
													 
												</div>
											</div>
										{{/ifequal}}
										{{#ifequal matrix_filter.filter_type 'NumberFilter'}}
											<div class="row">
												{{#each values}}
													<div class="col-6 col-md-4">
														<div class="trait-property">
															<label class="text-center">
																<div class="square responsiveback numbercontainer">
																	<span>{{this}}</span>
																</div>
															</label>
														</div>
													</div>
												{{/each}}
											</div>
										{{/ifequal}}

										{{#ifequal matrix_filter.filter_type 'TaxonFilter'}}
											<div class="row">
												{{#each values}}
													<div class="col-6 col-md-4">
														<div class="trait-property">
															<label class="text-center">
																<div class="square responsiveback numbercontainer">
																	<span>{{this}}</span>
																</div>
															</label>
														</div>
													</div>
												{{/each}}
											</div>
										{{/ifequal}}
										
									</div>
								{{/if}}
							{{/each }}
						</div>
					</div>
				</div>
			</div>
		</div>
	{{/if}}

	<div class="container">
		{{#each taxon_profile.texts }}
			{{#if text}}
				<div class="row">
					<div class="col-12 mt-3 {{#if @last}}mb-5{{/if}}">
						<h4>{{t taxon_text_type }}</h4>
						{{t text_key }}
					</div>
				</div>
			{{/if}}
		{{/each}}
	</div>

</div>
