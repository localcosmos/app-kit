import{Y as K,a as x,o as p,e as b,f as v,M as T,N as $,c as w,a4 as ye,l as A,P as Q,r as _,D as be,H as C,F as N,_ as S,E as V,I as ve,A as B,C as Y,K as P,j as H,W as he,h as X,w as D,k as z,u as h,q as ge,S as _e,b as Le,Q as j,R as M,B as xe,a0 as Ce,a5 as we,x as Te,a6 as J}from"./entry.c86999db.js";import{a as U,_ as Be}from"./FormWrapper.vue_vue_type_script_setup_true_lang.ff311a79.js";import{a as q,u as Se}from"./localDatabase.77e935a8.js";const ke=K("generic-forms",{state:()=>({form:null}),actions:{async loadForm(e){var n;if(e===((n=this.form)==null?void 0:n.uuid))return;const a=await fetch(`/localcosmos/features/GenericForm/${e}/${e}.json`);this.form=await a.json(),this.form&&(this.form.fields=this.form.fields.sort((t,l)=>t.position>l.position?1:-1))}}}),$e={class:"form-control w-full max-w-xs"},Ae={class:"label"},Pe={class:"label-text"},Fe=["value","name"],Oe={key:0},ee=x({__name:"FormCheckbox",props:{modelValue:{type:Boolean},name:null,label:null,helpText:null},emits:["update:model-value"],setup(e,{emit:a}){const n=t=>{var l;a("update:model-value",(l=t==null?void 0:t.target)==null?void 0:l.checked)};return(t,l)=>(p(),b("div",$e,[v("label",Ae,[v("span",Pe,T(e.label),1),v("input",{value:e.modelValue,name:e.name,class:"checkbox",type:"checkbox",onChange:n},null,40,Fe)]),e.helpText?(p(),b("small",Oe,T(e.helpText),1)):$("",!0)]))}}),Re=x({__name:"BooleanField",props:{field:null,value:null},emits:["update"],setup(e,{emit:a}){var l;const n=e;(l=n.field.definition)!=null&&l.initial&&a("update",n.field.definition.initial);const t=o=>{a("update",o)};return(o,c)=>{var s,i;return p(),w(ee,{"model-value":e.value,name:e.field.uuid,label:(s=e.field.definition)==null?void 0:s.label,"help-text":(i=e.field.definition)==null?void 0:i.helpText,"onUpdate:modelValue":t},null,8,["model-value","name","label","help-text"])}}}),je=x({__name:"CharField",props:{field:null,value:null},emits:["update"],setup(e,{emit:a}){var l;const n=e;(l=n.field.definition)!=null&&l.initial&&a("update",n.field.definition.initial);const t=o=>{a("update",o)};return(o,c)=>{var s,i;return p(),w(U,{"model-value":e.value,name:e.field.uuid,label:(s=e.field.definition)==null?void 0:s.label,"help-text":(i=e.field.definition)==null?void 0:i.helpText,type:"text","onUpdate:modelValue":t},ye({_:2},[e.field.definition.widget==="Textarea"?{name:"input",fn:A(d=>[v("textarea",Q(d.field,{class:["input input-bordered w-full max-w-xs",d.meta.valid?"":"input-error"]}),null,16)]),key:"0"}:void 0]),1032,["model-value","name","label","help-text"])}}}),Ue=x({__name:"NumberField",props:{field:null,value:null},emits:["update"],setup(e,{emit:a}){var l;const n=e;(l=n.field.definition)!=null&&l.initial&&a("update",n.field.definition.initial);const t=o=>{a("update",o)};return(o,c)=>{var s,i;return p(),w(U,{"model-value":e.value,name:e.field.uuid,label:(s=e.field.definition)==null?void 0:s.label,"help-text":(i=e.field.definition)==null?void 0:i.helpText,"widget-attrs":e.field.widgetAttrs,type:"number","onUpdate:modelValue":t},null,8,["model-value","name","label","help-text","widget-attrs"])}}}),te=(e,a)=>{let n;return function(...t){const l=this;n&&clearTimeout(n),n=setTimeout(()=>{e.apply(l,t),n=null},a)}},Ee=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),Z=(e,a,n)=>{for(const t in n){const l="set"+Ee(t);e[l]?H(()=>n[t],(o,c)=>{e[l](o,c)}):a[l]&&H(()=>n[t],o=>{a[l](o)})}},G=e=>{const a={};for(const n in e)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const t=n.slice(2).toLocaleLowerCase();a[t]=e[n]}return a},Ie=async e=>{const a=await Promise.all([S(()=>import("./marker-icon-2x.5449b5eb.js"),[],import.meta.url),S(()=>import("./marker-icon.7fed8684.js"),[],import.meta.url),S(()=>import("./marker-shadow.1bf8fc8d.js"),[],import.meta.url)]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:a[0].default,iconUrl:a[1].default,shadowUrl:a[2].default})},E=e=>{const a=_(()=>console.warn(`Method ${e} has been invoked without being replaced`)),n=(...t)=>a.value(...t);return n.wrapped=a,C(e,n),n},I=(e,a)=>e.wrapped.value=a,R=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||void 0,W="useGlobalLeaflet",ae={options:{type:Object,default:()=>({})}},ne=e=>({options:e.options,methods:{}}),le={...ae,pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},oe=(e,a,n)=>{const t=P("addLayer"),l=P("removeLayer"),{options:o,methods:c}=ne(e),s={...o,attribution:e.attribution,pane:e.pane},i=()=>t({leafletObject:a.value}),d=()=>l({leafletObject:a.value}),f={...c,setAttribution(r,m){this.$parent.leafletObject.attributionControl.removeAttribution(m).addAttribution(r)},setName(){d(),e.visible&&i()},setLayerType(){d(),e.visible&&i()},setVisible(r){a.value&&(r?i():d())},bindPopup({leafletObject:r}){a.value.bindPopup(r)},bindTooltip({leafletObject:r}){a.value.bindTooltip(r)},unbindTooltip(){const r=a.value?a.value.getTooltip():null;r&&r.unbindTooltip()},unbindPopup(){const r=a.value?a.value.getPopup():null;r&&r.unbindPopup()},updateVisibleProp(r){n.emit("update:visible",r)}};return C("bindPopup",f.bindPopup),C("bindTooltip",f.bindTooltip),C("unbindTooltip",f.unbindTooltip),C("unbindPopup",f.unbindPopup),he(()=>{f.unbindPopup(),f.unbindTooltip(),d()}),{options:s,methods:f}},De=(e,a)=>{if(e&&a.default)return Y("div",{style:{display:"none"}},a.default())},ze={...le,pane:{type:String,default:"tilePane"},opacity:{type:Number,custom:!1,default:1},zIndex:{type:Number,default:1},tileSize:{type:Number,default:256},noWrap:{type:Boolean,default:!1},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:void 0}},Me=(e,a,n)=>{const{options:t,methods:l}=oe(e,a,n);return{options:{...t,pane:e.pane,opacity:e.opacity,zIndex:e.zIndex,tileSize:e.tileSize,noWrap:e.noWrap,minZoom:e.minZoom,maxZoom:e.maxZoom},methods:{...l}}};var ie={emits:["ready","update:zoom","update:center","update:bounds"],props:{...ae,center:{type:[Object,Array],default:()=>[0,0]},bounds:{type:[Array,Object],default:void 0},maxBounds:{type:[Array,Object],default:void 0},zoom:{type:Number,default:0},minZoom:{type:Number,default:void 0},maxZoom:{type:Number,default:void 0},paddingBottomRight:{type:Array,default:void 0},paddingTopLeft:{type:Array,default:void 0},padding:{type:Array,default:void 0},worldCopyJump:{type:Boolean,default:!1},crs:{type:[String,Object],default:"EPSG3857"},maxBoundsViscosity:{type:Number,default:void 0},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number,default:void 0},inertiaMaxSpeed:{type:Number,default:void 0},easeLinearity:{type:Number,default:void 0},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number,default:void 0},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:!1},useGlobalLeaflet:{type:Boolean,default:!1}},setup(e,a){const n=_(null),t=be({ready:!1,leafletRef:{},layersToAdd:[],layersInControl:[]}),{options:l}=ne(e),o={...l,minZoom:e.minZoom,maxZoom:e.maxZoom,maxBounds:e.maxBounds,maxBoundsViscosity:e.maxBoundsViscosity,worldCopyJump:e.worldCopyJump,crs:e.crs,center:e.center,zoom:e.zoom,inertia:e.inertia,inertiaDeceleration:e.inertiaDeceleration,inertiaMaxSpeed:e.inertiaMaxSpeed,easeLinearity:e.easeLinearity,zoomAnimation:e.zoomAnimation,zoomAnimationThreshold:e.zoomAnimationThreshold,fadeAnimation:e.fadeAnimation,markerZoomAnimation:e.markerZoomAnimation},c=E("addLayer"),s=E("removeLayer"),i=E("registerControl"),d=E("registerLayerControl");C(W,e.useGlobalLeaflet);const f={moveEndHandler(){a.emit("update:zoom",t.leafletRef.getZoom()),a.emit("update:center",t.leafletRef.getCenter()),a.emit("update:bounds",t.leafletRef.getBounds())},overlayAddHandler(L){const g=t.layersInControl.find(k=>k.name===L.name);g&&g.updateVisibleProp(!0)},overlayRemoveHandler(L){const g=t.layersInControl.find(k=>k.name===L.name);g&&g.updateVisibleProp(!1)}};N(async()=>{e.useGlobalLeaflet&&(R.L=R.L||await S(()=>import("./leaflet-src.690a7ca8.js").then(u=>u.l),["./leaflet-src.690a7ca8.js","./entry.c86999db.js","./entry.0e584ac5.css"],import.meta.url));const{map:L,CRS:g,Icon:k,latLngBounds:ue,latLng:ce,DomEvent:fe}=e.useGlobalLeaflet?R.L:await S(()=>import("./leaflet-src.esm.f0660c5f.js"),[],import.meta.url);try{o.beforeMapMount&&await o.beforeMapMount()}catch(u){console.error(`The following error occurred running the provided beforeMapMount hook ${u.message}`)}await Ie(k);const me=typeof o.crs=="string"?g[o.crs]:o.crs;o.crs=me||g.EPSG3857;const F={addLayer(u){u.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd.push(u):t.layersInControl.find(O=>O.leafletObject._leaflet_id===u.leafletObject._leaflet_id)||(t.layerControl.addLayer(u),t.layersInControl.push(u))),u.visible!==!1&&t.leafletRef.addLayer(u.leafletObject)},removeLayer(u){u.layerType!==void 0&&(t.layerControl===void 0?t.layersToAdd=t.layersToAdd.filter(y=>y.name!==u.name):(t.layerControl.removeLayer(u.leafletObject),t.layersInControl=t.layersInControl.filter(y=>y.leafletObject._leaflet_id!==u.leafletObject._leaflet_id))),t.leafletRef.removeLayer(u.leafletObject)},registerLayerControl(u){t.layerControl=u,t.layersToAdd.forEach(y=>{t.layerControl.addLayer(y)}),t.layersToAdd=[],i(u)},registerControl(u){t.leafletRef.addControl(u.leafletObject)},setZoom(u){const y=t.leafletRef.getZoom();u!==y&&t.leafletRef.setZoom(u,{animate:e.noBlockingAnimations?!1:null})},setPaddingBottomRight(u){t.paddingBottomRight=u},setPaddingTopLeft(u){t.paddingTopLeft=u},setPadding(u){t.padding=u},setCrs(u){const y=t.leafletRef.getBounds();t.leafletRef.options.crs=u,t.leafletRef.fitBounds(y,{animate:!1,padding:[0,0]})},fitBounds(u){t.leafletRef.fitBounds(u,{animate:this.noBlockingAnimations?!1:null})},setBounds(u){if(!u)return;const y=ue(u);if(!y.isValid())return;!(t.lastSetBounds||t.leafletRef.getBounds()).equals(y,0)&&(t.lastSetBounds=y,t.leafletRef.fitBounds(y,this.fitBoundsOptions))},setCenter(u){if(u==null)return;const y=ce(u),O=t.lastSetCenter||t.leafletRef.getCenter();(O.lat!==y.lat||O.lng!==y.lng)&&(t.lastSetCenter=y,t.leafletRef.panTo(y,{animate:this.noBlockingAnimations?!1:null}))}};I(c,F.addLayer),I(s,F.removeLayer),I(i,F.registerControl),I(d,F.registerLayerControl),t.leafletRef=L(n.value,o),Z(F,t.leafletRef,e);const pe=G(a.attrs);t.leafletRef.on("moveend",te(f.moveEndHandler,100)),t.leafletRef.on("overlayadd",f.overlayAddHandler),t.leafletRef.on("overlayremove",f.overlayRemoveHandler),fe.on(t.leafletRef,pe),t.ready=!0,V(()=>a.emit("ready",t.leafletRef))}),ve(()=>{t.leafletRef&&t.leafletRef.remove()});const r=B(()=>t.leafletRef),m=B(()=>t.ready);return{root:n,ready:m,leafletObject:r}},render(){return Y("div",{style:{width:"100%",height:"100%"},ref:"root"},this.ready?this.$slots.default():{})}};ie.__file="src/components/LMap.vue";const Ne={...le,pane:{type:String,default:"markerPane"},draggable:{type:Boolean,custom:!0,default:!1},latLng:{type:[Object,Array],custom:!0,default:null},icon:{type:[Object],default:()=>{},custom:!1},zIndexOffset:{type:Number,custom:!1,default:null}},Ve=(e,a,n)=>{const{options:t,methods:l}=oe(e,a,n),o={...t,...e},c={...l,setDraggable(s){a.value.dragging&&(s?a.value.dragging.enable():a.value.dragging.disable())},latLngSync(s){n.emit("update:latLng",s.latlng),n.emit("update:lat-lng",s.latlng)},setLatLng(s){if(s!=null&&a.value){const i=a.value.getLatLng();(!i||!i.equals(s))&&a.value.setLatLng(s)}}};return{options:o,methods:c}};var se={name:"LMarker",props:Ne,setup(e,a){const n=_({}),t=_(!1),l=P(W),o=P("addLayer");C("canSetParentHtml",()=>!!n.value.getElement()),C("setParentHtml",i=>n.value.getElement().innerHTML=i),C("setIcon",i=>n.value.setIcon&&n.value.setIcon(i));const{options:c,methods:s}=Ve(e,n,a);return c.icon===void 0&&delete c.icon,N(async()=>{const{marker:i,DomEvent:d}=l?R.L:await S(()=>import("./leaflet-src.esm.f0660c5f.js"),[],import.meta.url);n.value=i(e.latLng,c);const f=G(a.attrs);d.on(n.value,f),n.value.on("move",te(s.latLngSync,100)),Z(s,n.value,e),o({...e,...s,leafletObject:n.value}),t.value=!0,V(()=>a.emit("ready",n.value))}),{ready:t,leafletObject:n}},render(){return De(this.ready,this.$slots)}};se.__file="src/components/LMarker.vue";const re={...ze,tms:{type:Boolean,default:!1},subdomains:{type:String,default:"abc"},detectRetina:{type:Boolean,default:!1},url:{type:String,default:null}},Ze=(e,a)=>{const{options:n,methods:t}=Me(e,a);return{options:{...n,tms:e.tms,subdomains:e.subdomains,detectRetina:e.detectRetina},methods:{...t}}};var de={props:re,setup(e,a){const n=_({}),t=P(W),l=P("addLayer"),{options:o,methods:c}=Ze(e,n);return N(async()=>{const{tileLayer:s,DomEvent:i}=t?R.L:await S(()=>import("./leaflet-src.esm.f0660c5f.js"),[],import.meta.url);n.value=s(e.url,o);const d=G(a.attrs);i.on(n.value,d),Z(c,n.value,e),l({...e,...c,leafletObject:n.value}),V(()=>a.emit("ready",n.value))}),{leafletObject:n}},render(){return null}};de.__file="src/components/LTileLayer.vue";({...re});const Ge={class:"form-control w-full max-w-xs"},We={class:"label"},He={class:"label-text"},Je={class:"h-64 max-w-xs"},qe=["disabled"],Ke=x({__name:"GeoJsonField",props:{field:null,value:null},emits:["update"],async setup(e,{emit:a}){var r;let n,t;const l=e;(r=l.field.definition)!=null&&r.initial&&a("update",l.field.definition.initial);const o=X();[n,t]=D(()=>o.loadSettings()),await n,t();const c=B(()=>{var m,L;return{type:"Feature",properties:{name:"Coors Field",amenity:"Baseball Stadium",popupContent:"This is where the Rockies play!"},geometry:{type:"Point",coordinates:[(m=l.value)==null?void 0:m.lat,(L=l.value)==null?void 0:L.lng],crs:{type:"name",properties:{name:"EPSG:4326"}}}}});B(()=>({type:"FeatureCollection",features:[c.value]}));const s=m=>{console.log(m),m.latlng&&a("update",m.latlng)},i=m=>{a("update",m)},d=_(!1),f=()=>{d.value=!0,navigator.geolocation.getCurrentPosition(m=>{s({latlng:{lat:m.coords.latitude,lng:m.coords.longitude}}),d.value=!1})};return(m,L)=>{var g;return p(),b("div",Ge,[v("label",We,[v("span",He,T((g=e.field.definition)==null?void 0:g.label),1)]),v("div",Je,[z(h(ie),{center:[53.55108,9.99368],zoom:10,onClick:s},{default:A(()=>[z(h(de),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap","max-zoom":10}),e.value?(p(),w(h(se),{key:0,"lat-lng":e.value,draggable:"","onUpdate:latLng":i},null,8,["lat-lng"])):$("",!0)]),_:1},8,["center"])]),h(o).cordovaReady?(p(),b("button",{key:0,class:"btn btn-block",disabled:h(d),onClick:f}," Position bestimmen ",8,qe)):$("",!0)])}}}),Qe=x({__name:"DateTimeJsonField",props:{field:null,value:null},emits:["update"],setup(e,{emit:a}){var c;const n=e;(c=n.field.definition)!=null&&c.initial&&a("update",n.field.definition.initial);const t=_(q("")),l=B(()=>({type:"Temporal",cron:{type:"timestamp",format:"unixtime",timestamp:t.value.unix(),timezone_offset:t.value.toDate().getTimezoneOffset()}})),o=s=>{t.value=q(s),a("update",l.value)};return(s,i)=>{var d;return p(),b("div",null,[z(U,{name:e.field.uuid,label:(d=e.field.definition)==null?void 0:d.label,type:"datetime-local","onUpdate:modelValue":o},null,8,["name","label"])])}}}),Ye=["disabled","onClick"],Xe=["onChange","onBlur"],et={key:0},tt=x({__name:"PictureField",props:{field:null,value:null},emits:["update"],async setup(e,{emit:a}){let n,t;const l=X();[n,t]=D(()=>l.loadSettings()),await n,t();const o=_(null),c=()=>{window.device.platform==="browser"?o.value.click():navigator.camera.getPicture(i=>{window.resolveLocalFileSystemURL(i,d=>s(d),()=>{})},()=>{},{mediaType:Camera.MediaType.PICTURE,allowEdit:!1,destinationType:Camera.DestinationType.FILE_URI})},s=i=>{a("update",i)};return(i,d)=>{var f,r;return p(),w(U,{"model-value":e.value,name:e.field.uuid,label:(f=e.field.definition)==null?void 0:f.label,"help-text":(r=e.field.definition)==null?void 0:r.helpText,type:"text","onUpdate:modelValue":s},{input:A(m=>[v("button",{class:ge(["btn w-full max-w-xs",m.meta.valid?"":"btn-error"]),disabled:!h(l).cordovaReady,onClick:_e(c,["prevent"])}," Datei ausw\xE4hlen ",10,Ye),v("input",{ref_key:"fileInput",ref:o,type:"file",class:"hidden",onChange:m.handleChange,onBlur:m.handleBlur},null,40,Xe),e.value?(p(),b("span",et,T(e.value),1)):$("",!0)]),_:1},8,["model-value","name","label","help-text"])}}}),at=K("backbone-profile",{state:()=>({id:null,profiles:[]}),getters:{searchableKeys:e=>e.profiles.map(a=>a.name)},actions:{async loadBackboneProfile(e=null){var n;if(e===null){const t=Le();await t.loadFeatures(),(n=t.backboneTaxonomy)!=null&&n.uuid&&await this.loadBackboneProfile(t.backboneTaxonomy.uuid);return}if(e===this.id)return;const a=await fetch(`/localcosmos/features/BackboneTaxonomy/${e}/vernacular/de.json`);this.id=e,this.profiles=await a.json()}}}),nt={class:"form-control w-full max-w-xs"},lt={class:"label"},ot={class:"label-text"},it={class:"relative"},st=["value","disabled"],rt={key:0,class:"absolute menu bg-base-100 w-64 ml-1 z-50 -mt-1"},dt=["onClick"],ut=x({__name:"TaxonField",props:{field:null},emits:["update"],setup(e,{emit:a}){const n=at(),t=_(!1),l=_(!1),o=_(""),c=async()=>{t.value=!0,await n.loadBackboneProfile(),t.value=!1},s=B(()=>n.searchableKeys.filter(r=>r.toUpperCase().startsWith(o.value.toUpperCase()))),i=B(()=>o.value.length>0?s.value.slice(0,10):[]),d=r=>{var m;o.value=(m=r.target)==null?void 0:m.value,l.value=!1},f=r=>{o.value=r,l.value=!0,a("update",n.profiles.find(m=>m.name===r))};return(r,m)=>{var L;return p(),b("div",nt,[v("label",lt,[v("span",ot,T((L=e.field.definition)==null?void 0:L.label),1)]),v("div",it,[v("input",{value:h(o),type:"text",placeholder:"Search\u2026",class:"input input-bordered",disabled:h(t),onFocus:c,onKeyup:d},null,40,st),h(s).length>0&&!h(l)?(p(),b("ul",rt,[(p(!0),b(j,null,M(h(i),g=>(p(),b("li",{key:g,class:"border-2 border-purple-500",onClick:k=>f(g)},[v("a",null,T(g),1)],8,dt))),128))])):$("",!0)])])}}}),ct=x({__name:"MultipleChoiceField",props:{field:null,value:null},emits:["update"],setup(e,{emit:a}){var o;const n=e;(o=n.field.definition)!=null&&o.initial&&a("update",n.field.definition.initial);const t=_([]),l=c=>{t.value.includes(c)?t.value.splice(t.value.indexOf(c),1):t.value.push(c),a("update",t.value)};return(c,s)=>(p(),b("div",null,[(p(!0),b(j,null,M(e.field.definition.choices,(i,d)=>(p(),w(ee,{key:d,name:`${e.field.uuid}_${d}`,label:i[1],"onUpdate:modelValue":f=>l(i[0])},null,8,["name","label","onUpdate:modelValue"]))),128))]))}}),ft=["value"],mt=x({__name:"ChoiceField",props:{field:null,value:null},emits:["update"],setup(e,{emit:a}){var o;const n=e;(o=n.field.definition)!=null&&o.initial&&a("update",n.field.definition.initial);const t=_(n.field),l=c=>{a("update",c)};return(c,s)=>{var i,d;return p(),w(U,{"model-value":e.value,name:e.field.uuid,label:(i=e.field.definition)==null?void 0:i.label,"help-text":(d=e.field.definition)==null?void 0:d.helpText,"onUpdate:modelValue":l},{input:A(f=>[v("select",Q(f.field,{class:["input input-bordered w-full max-w-xs",f.meta.valid?"":"input-error"]}),[(p(!0),b(j,null,M(h(t).definition.choices,r=>(p(),b("option",{key:r,value:r[0]},T(r[1]),9,ft))),128))],16)]),_:1},8,["model-value","name","label","help-text"])}}}),pt={class:"flex flex-row"},yt=["onClick"],bt=x({__name:"GenericForm",props:{form:null},emits:["submit"],setup(e,{emit:a}){const n=e,t=d=>{const f=we();switch(d.fieldClass){}return f},l=d=>{switch(d.fieldClass){case"BooleanField":return Re;case"TaxonField":return ut;case"PointJSONField":return Ke;case"DateTimeJSONField":return Qe;case"PictureField":return tt;case"CharField":return je;case"DecimalField":case"FloatField":case"IntegerField":return Ue;case"MultipleChoiceField":return ct;case"ChoiceField":return mt;default:return null}},o=B(()=>{const d={};return n.form.fields.forEach(f=>{d[f.uuid]=t(f)}),Ce(d)}),c=_({}),s=()=>a("submit",{data:c.value,form:n.form}),i=(d,f)=>c.value[d]=f;return(d,f)=>(p(),b("div",pt,[z(Be,{validation:h(o),onSubmit:s},{actions:A(({submit:r})=>[v("input",{type:"submit",class:"btn",value:"Absenden",onClick:r},null,8,yt)]),default:A(()=>[(p(!0),b(j,null,M(e.form.fields,r=>(p(),b(j,null,[l(r)?(p(),w(xe(l(r)),{key:r.uuid,field:r,value:h(c)[r.uuid],onUpdate:m=>i(r.uuid,m)},null,40,["field","value","onUpdate"])):(p(),b("div",{key:r.uuid,class:"alert alert-error shadow-lg w-full max-w-xs my-4"},[v("div",null,[v("span",null,"Unknown form component: "+T(r.fieldClass),1)])]))],64))),256))]),_:1},8,["validation"])]))}}),Lt=x({__name:"new",async setup(e){let a,n;const t=ke();[a,n]=D(()=>t.loadForm("3b605cee-1a7e-46f6-b701-71e836cb778b")),await a,n();const l=Te(),o=([a,n]=D(()=>Se()),a=await a,n(),a),c=async({form:i,data:d})=>{await o.datasets.add({observationForm:J(i),data:J(d)}),await l.push({name:"report"})},s=t.form;return(i,d)=>(p(),b("div",null,[h(s)?(p(),w(bt,{key:0,form:h(s),onSubmit:c},null,8,["form"])):$("",!0)]))}});export{Lt as default};
