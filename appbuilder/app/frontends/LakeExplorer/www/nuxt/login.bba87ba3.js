import{a as g,h as b,w as x,r as _,i as y,j as V,e as k,k as l,l as c,f as t,m as d,p as S,o as A,q as C,u as a,s as N,v as B,t as U,x as q,y as R}from"./entry.c86999db.js";import{_ as z,a as h}from"./FormWrapper.vue_vue_type_script_setup_true_lang.ff311a79.js";const H={class:"form-control w-full max-w-xs"},L={class:"label"},M=t("span",{class:"label-text"},"An mich erinnern?",-1),P={class:"mt-8"},E=g({__name:"login",async setup($){let r,u;const f=b();[r,u]=x(()=>f.loadSettings()),await r,u();const i=_(!1),m=_(!1),s=_({username:"",password:"",platform:device.platform,client_id:f.generateUuid()}),p=y();[r,u]=x(()=>p.loadLocalLogin()),await r,u();const v=async()=>{i.value||(i.value=!0,await p.login(s.value,m.value),i.value=!1)};return V(()=>p.isAuthenticated,async w=>{if(w){const e=q(),n=R();n.query.next?await e.push({path:n.query.next.toString()}):await e.push({name:"index"})}},{immediate:!0}),(w,e)=>{const n=S;return A(),k("div",null,[l(z,{onSubmit:v},{actions:c(()=>[t("input",{type:"submit",value:"Anmelden",class:C(["btn",a(i)?"loading":""])},null,2)]),default:c(()=>[l(h,{modelValue:a(s).username,"onUpdate:modelValue":e[0]||(e[0]=o=>a(s).username=o),name:"username",label:"Benutzername",type:"text"},null,8,["modelValue"]),l(h,{modelValue:a(s).password,"onUpdate:modelValue":e[1]||(e[1]=o=>a(s).password=o),name:"password",label:"Passwort",type:"password"},null,8,["modelValue"]),t("div",H,[t("label",L,[M,N(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>U(m)?m.value=o:null),type:"checkbox",class:"checkbox"},null,512),[[B,a(m)]])])])]),_:1}),t("div",P,[t("p",null,[d(" Noch keinen Account? "),l(n,{to:{name:"registration"}},{default:c(()=>[d(" Hier registrieren! ")]),_:1})]),t("p",null,[d(" Passwort vergessen? "),l(n,{to:{name:"reset"}},{default:c(()=>[d(" Hier ein Neues anfordern! ")]),_:1})])])])}}});export{E as default};
